<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <!-- Your head content -->
</head>
<body>
<h1>Expenses</h1>


<p>
<form th:action="@{/expenses/search}" method="get">
  <input type="text" name="searchTerm" placeholder="Search expenses..." required>
  <button type="submit">Search</button>
</form>
</p>
<!-- Display the search results count -->
<p th:if="${searchCount != null}" th:text="'Number of results: ' + ${searchCount}"></p>

<!-- Display a message if no results were found -->
<p th:if="${searchCount != null and searchCount == 0}">No results found.</p>

<form th:action="@{/expenses/updateCategory}" method="post">
  <select name="categoryId">
    <option value="">Select Category</option>
    <option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.category}"></option>
  </select>
  <button type="submit">Update</button>

  <table>
    <!-- Table headers -->
    <tr>
      <th>Date</th>
      <th>Entity</th>
      <th>Credit/Debit</th>
      <th>Amount</th>
      <th>Description</th>
      <th>Category</th>
      <th>Select</th>
    </tr>

    <!-- Table rows -->
    <tr th:each="expense : ${expenses}">
      <td th:text="${expense.date}"></td>
      <td th:text="${expense.entity}"></td>
      <td th:text="${expense.creditOrDebit}"></td>
      <td th:text="${expense.amount}"></td>
      <td th:text="${expense.description}"></td>
      <td th:text="${expense.categories.size() > 0 ? expense.categories[0].category : ''}"></td>
      <td><input type="checkbox" name="selectedExpenseIds" th:value="${expense.id}" /></td>
    </tr>
  </table>
</form>
</body>
</html>
